<!doctype html>
<head>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto"></link>
	<link rel="stylesheet" href="{{ url_for('static', filename='style.css', v=(range(1, 100000) | random)) }}"></link>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="{{ url_for('static', filename='jquery.js') }}">\x3C/script>')</script>
	<script>
    function post_component(target, url, params) {
      $(target).html('<div class="spinner"></div>');
      $.post(url, params, {
      }).done(function(response) {
        $(target).html(response);
      }).fail(function() {
        $(target).text("{{ 'Error: Could not contact server.' }}");
      });
    }

    function get_component(target, url) {
      $(target).html('<div class="spinner"></div>');
      $.get(url, {
      }).done(function(response) {
        $(target).html(response);
      }).fail(function() {
        $(target).text("{{ 'Error: Could not contact server.' }}");
      });
    }
  </script>
  {% block scripts %}{% endblock %}
</head>
<title>{% block title %}EventFinder{% endblock %}</title>
<section class="content">
	<header class='app_header'>
    <div>
      <a class='app_title' href="javascript:get_component('#main', '{{ url_for('events') }}')">
        {% block header %}EventFinder{% endblock %}
      </a>
    </div>
		<div class='app_login'>
			{% if session.user %}
			    <a href="{{ url_for('logout') }}">{{ session.user.username }}</a>
          {% if session.user.image_url %}
			      <a href="javascript:get_component('#main', '{{ url_for('events_interested') }}')">
              <img class="user_profile_img" src="{{ session.user.image_url }}"></img>
            </a>
			    {% endif %}
			{% else %}
			  <a href="{{ url_for('oauth2.authorize') }}">
			  	Sign In
			  </a>
			{% endif %}
		</div>
	</header>
  <div id='main'>
  	{% block content %}{% endblock %}
  </div>
</section>
</html>